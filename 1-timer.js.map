{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst startBtnEl = document.querySelector(\".timer-start-btn\");\nconst datePickerEl = document.querySelector(\"#datetime-picker\");\nconst daysCountEl = document.querySelector(\"[data-days]\");\nconst hrsCountEl = document.querySelector(\"[data-hours]\");\nconst minCountEl = document.querySelector(\"[data-minutes]\");\nconst secCountEl = document.querySelector(\"[data-seconds]\");\nstartBtnEl.disabled = true;\ndatePickerEl.disabled = false;\n\nlet userSelectedDate = 0;\nlet timerStartNum = {};\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        if (selectedDates[0].getTime() <= Date.now()) {\n            datePickerEl.disabled = false;\n            startBtnEl.disabled = true;\n            return iziToast.error({\n                backgroundColor: '#EF4040',\n                theme: 'dark',\n                title: 'Alert',\n                message: 'Please choose a date in the future',\n                closeOnClick: true,\n                position: 'topRight',\n                timeout: 3000,\n});\n        } else {\n            userSelectedDate = selectedDates[0].getTime();\n            datePickerEl.disabled = false;\n            startBtnEl.disabled = false;\n        }\n    },\n};\n\nflatpickr(\"#datetime-picker\", options);\n\n\nfunction pad(value) {\n    return String(value).padStart(2, \"0\");\n};\n\nfunction updateClockface({days, hours, minutes, seconds}) {\n    daysCountEl.textContent = `${days}`;\n    hrsCountEl.textContent = `${hours}`;\n    minCountEl.textContent = `${minutes}`;\n    secCountEl.textContent = `${seconds}`;\n};\n\n\nstartBtnEl.addEventListener(\"click\", setTimer);\nfunction setTimer(event) {\n    datePickerEl.disabled = true;\n    startBtnEl.disabled = true;\n    const intervalId = setInterval(getStartNum, 1000);\n    function getStartNum() {\n        const timeDifference = userSelectedDate - Date.now();\n        if (timeDifference > 0) {\n            convertMs(timeDifference);\n            updateClockface(timerStartNum);\n        } else {\n            clearInterval(intervalId);\n            datePickerEl.disabled = false;\n            return;\n        }\n    };\n};\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = pad(Math.floor(ms / day));\n  // Remaining hours\n  const hours = pad(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = pad(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = pad(Math.floor((((ms % day) % hour) % minute) / second));\n  return timerStartNum = {days, hours, minutes, seconds};\n};"],"names":["startBtnEl","datePickerEl","daysCountEl","hrsCountEl","minCountEl","secCountEl","userSelectedDate","timerStartNum","options","selectedDates","iziToast","flatpickr","pad","value","updateClockface","days","hours","minutes","seconds","setTimer","event","intervalId","getStartNum","timeDifference","convertMs","ms"],"mappings":"0IAKA,MAAMA,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,kBAAkB,EACxDC,EAAc,SAAS,cAAc,aAAa,EAClDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAa,SAAS,cAAc,gBAAgB,EACpDC,EAAa,SAAS,cAAc,gBAAgB,EAC1DL,EAAW,SAAW,GACtBC,EAAa,SAAW,GAExB,IAAIK,EAAmB,EACnBC,EAAgB,CAAA,EAEpB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,GAAIA,EAAc,CAAC,EAAE,QAAO,GAAM,KAAK,MACnC,OAAAR,EAAa,SAAW,GACxBD,EAAW,SAAW,GACfU,EAAS,MAAM,CAClB,gBAAiB,UACjB,MAAO,OACP,MAAO,QACP,QAAS,qCACT,aAAc,GACd,SAAU,WACV,QAAS,GACzB,CAAC,EAEWJ,EAAmBG,EAAc,CAAC,EAAE,QAAO,EAC3CR,EAAa,SAAW,GACxBD,EAAW,SAAW,EAE7B,CACL,EAEAW,EAAU,mBAAoBH,CAAO,EAGrC,SAASI,EAAIC,EAAO,CAChB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASC,EAAgB,CAAC,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAG,CACtDhB,EAAY,YAAc,GAAGa,CAAI,GACjCZ,EAAW,YAAc,GAAGa,CAAK,GACjCZ,EAAW,YAAc,GAAGa,CAAO,GACnCZ,EAAW,YAAc,GAAGa,CAAO,EACvC,CAGAlB,EAAW,iBAAiB,QAASmB,CAAQ,EAC7C,SAASA,EAASC,EAAO,CACrBnB,EAAa,SAAW,GACxBD,EAAW,SAAW,GACtB,MAAMqB,EAAa,YAAYC,EAAa,GAAI,EAChD,SAASA,GAAc,CACnB,MAAMC,EAAiBjB,EAAmB,KAAK,IAAG,EAClD,GAAIiB,EAAiB,EACjBC,EAAUD,CAAc,EACxBT,EAAgBP,CAAa,MAC1B,CACH,cAAcc,CAAU,EACxBpB,EAAa,SAAW,GACxB,MACH,CACT,CACA,CAEA,SAASuB,EAAUC,EAAI,CAQrB,MAAMV,EAAOH,EAAI,KAAK,MAAMa,EAAK,KAAG,CAAC,EAE/BT,EAAQJ,EAAI,KAAK,MAAOa,EAAK,MAAO,IAAI,CAAC,EAEzCR,EAAUL,EAAI,KAAK,MAAQa,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEtDP,EAAUN,EAAI,KAAK,MAASa,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EACvE,OAAOlB,EAAgB,CAAC,KAAAQ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvD"}